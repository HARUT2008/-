<body>
<canvas id='c' width="800" height="600"></canvas>
<script>
const C = document.getElementById('c').getContext('2d');
const W = C.canvas.width;
const H = C.canvas.height;
const epsilon = 0.08;
const point = 20;
const x0 = W / 2;
const y0 = H / 2;

const I = C.createImageData(W, H);
drawFrame(I.data);
C.putImageData(I, 0, 0);

function drawFrame(D) {
  let i = 0;
  for (let y = 0; y < H; y++) {
    for (let x = 0; x < W; x++) {
      const X = (x - x0) / point;
      const Y = (y0 - y) / point;
      const p = getPixel(X,Y);
      D[i++] = p.r * 255;
      D[i++] = p.g * 255;
      D[i++] = p.b * 255;
      D[i++] = p.a * 255;
    }
  }
}
function getPixel(x, y) {
  let p = backgroundPattern(x, y);
  const horParab = horizontalParabola(x, y, 0.3);
  const graphLine = aRedLine(x, y, 1, 0, 0.1);
  const parab = parabola(x, y, 0.3);
  const axesX = aRedLine(x ,y, 0, 0,epsilon);
  const axesY = aRedLine(y,x, 0, 0,epsilon);

  if (graphLine.a > 0) p = graphLine;
  if (parab.a > 0) p = parab;
  if (horParab.a > 0) p = horParab;
  if (axesX.a > 0) p = axesX;
  if (axesY.a > 0) p = axesY;
  return p;
}


function backgroundPattern(x, y) {
  return { r: 0, g: 0, b: 0, a: 0 };
}


function aRedLine(x, y, k, b, epsilon) {
  const onLine = Math.abs(y - (k * x + b)) < epsilon;
  return { r: 0, g: 0.5, b: 1, a: onLine ? 1 : 0 };
}

function parabola(x, y, a) {
  const yOnCurve = a * x * x;
  const onCurve = Math.abs(y - yOnCurve) < epsilon;
  return { r: 0, g: 0.5, b: 1, a: onCurve ? 1 : 0 };
}


function horizontalParabola(x, y, a) {
  const xExpected = a * y * y;
  const onCurve = Math.abs(x - xExpected) < epsilon;
  return { r: 0, g: 0.5, b: 1, a: onCurve ? 1 : 0 };
}
</script>
</body>
</html>

